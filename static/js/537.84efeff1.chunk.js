"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[537],{56537:function(e,a,t){t.r(a),t.d(a,{default:function(){return G}});var n=t(47313),l=t(10499),i=t(1413),s=t(70885),r=t(43270),o=t(35188),d=t(23516),c=t(45788),u=t(63830),m=t(25803),g=t(94561),h=t(49384),f=t(46417);function x(e){var a=e.label,t=e.name,s=e.hint,o=e.externalErrorMessage,d=e.required,c=e.placeholder,u=e.isClearable,m=e.notFoundContent,x=(0,r.Gc)(),p=x.register,y=x.errors,j=x.formState,b=j.touched,v=j.isSubmitted,Z=x.setValue,N=x.watch,C=h.Z.errorMessage(t,y,b,v,o);(0,n.useEffect)((function(){p({name:t})}),[p,t]);var B=N(t),w=Boolean(C)?{control:function(e){return(0,i.Z)((0,i.Z)({},e),{},{borderColor:"red"})}}:void 0;return(0,f.jsxs)("div",{className:"form-group",children:[Boolean(a)&&(0,f.jsx)("label",{className:"col-form-label ".concat(d?"required":null),children:a}),(0,f.jsx)("br",{}),(0,f.jsx)(g.ZP,{className:"w-100",value:B&&B.length?B.map((function(e){return{value:e,label:e}})):[],onChange:function(a){if(!a||!a.length)return Z(t,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));var n=a.map((function(e){return e.value})).join(",").split(",");Z(t,n,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n)},onBlur:function(a){e.onBlur&&e.onBlur(a)},id:t,name:t,placeholder:c||"",isClearable:u,styles:w,isMulti:!0,formatCreateLabel:function(e){return e},loadingMessage:function(){return(0,l.ag)("autocomplete.loading")},noOptionsMessage:function(){return m||""}}),(0,f.jsx)("div",{className:"invalid-feedback",children:C}),Boolean(s)&&(0,f.jsx)("small",{className:"form-text text-muted",children:s})]})}x.defaultProps={required:!1,isClearable:!0};var p=x,y=t(47575),j=t(95748),b=t(69138),v=t(47590),Z=t(6473),N=t(31172),C=t(67357),B=t(13586),w=t(40846),L=Z.Ry().shape({timestampRange:v.Z.datetimeRange((0,l.ag)("auditLog.fields.timestampRange")),entityNames:v.Z.stringArray((0,l.ag)("auditLog.fields.entityNames")),entityId:v.Z.string((0,l.ag)("auditLog.fields.entityId")),action:v.Z.string((0,l.ag)("auditLog.fields.action")),createdByEmail:v.Z.email((0,l.ag)("auditLog.fields.createdByEmail"))}),E={timestampRange:[],entityNames:[],entityId:null,action:null,createdByEmail:null},R={timestampRange:{label:(0,l.ag)("auditLog.fields.timestampRange"),render:w.Z.datetimeRange()},entityNames:{label:(0,l.ag)("auditLog.fields.entityNames"),render:w.Z.stringArray()},entityId:{label:(0,l.ag)("auditLog.fields.entityId"),render:w.Z.generic()},action:{label:(0,l.ag)("auditLog.fields.action"),render:w.Z.generic()},createdByEmail:{label:(0,l.ag)("auditLog.fields.createdByEmail"),render:w.Z.generic()}};var I=function(e){var a=(0,c.v9)(d.Z.selectRawFilter),t=(0,c.I0)(),g=(0,u.TH)(),h=(0,n.useState)(!1),x=(0,s.Z)(h,2),v=x[0],Z=x[1],w=(0,n.useState)((function(){var e=(0,i.Z)((0,i.Z)({},E),a),t=N.parse(g.search);return e.entityNames=t.entityNames||e.entityNames,e.entityNames&&!Array.isArray(e.entityNames)&&(e.entityNames=[e.entityNames]),e.entityId=t.entityId||e.entityId,e.createdByEmail=t.createdByEmail||e.createdByEmail,e})),I=(0,s.Z)(w,1)[0],S=(0,r.cI)({resolver:(0,C.X)(L),defaultValues:I,mode:"all"});(0,n.useEffect)((function(){t(o.Z.doFetch(L.cast(I),a))}),[t]);var M=function(e){var a=S.getValues();t(o.Z.doFetch(e,a)),Z(!1)},k=e.loading;return(0,f.jsxs)(b.Z,{children:[(0,f.jsx)(B.Z,{onClick:function(){Z(!v)},renders:R,values:a,expanded:v,onRemove:function(e){return S.setValue(e,E[e]),S.handleSubmit(M)()}}),(0,f.jsx)("div",{className:"container",children:(0,f.jsx)("div",{className:"collapse ".concat(v?"show":""),children:(0,f.jsx)(r.RV,(0,i.Z)((0,i.Z)({},S),{},{children:(0,f.jsxs)("form",{onSubmit:S.handleSubmit(M),children:[(0,f.jsxs)("div",{className:"row",children:[(0,f.jsx)("div",{className:"col-lg-6 col-12",children:(0,f.jsx)(m.Z,{name:"timestampRange",label:(0,l.ag)("auditLog.fields.timestampRange"),showTimeInput:!0})}),(0,f.jsx)("div",{className:"col-lg-6 col-12",children:(0,f.jsx)(y.Z,{name:"createdByEmail",label:(0,l.ag)("auditLog.fields.createdByEmail")})}),(0,f.jsx)("div",{className:"col-lg-6 col-12",children:(0,f.jsx)(p,{name:"entityNames",label:(0,l.ag)("auditLog.fields.entityNames"),notFoundContent:(0,l.ag)("auditLog.entityNamesHint")})}),(0,f.jsx)("div",{className:"col-lg-6 col-12",children:(0,f.jsx)(y.Z,{name:"entityId",label:(0,l.ag)("auditLog.fields.entityId")})}),(0,f.jsx)("div",{className:"col-lg-6 col-12",children:(0,f.jsx)(y.Z,{name:"action",label:(0,l.ag)("auditLog.fields.action")})})]}),(0,f.jsx)("div",{className:"row",children:(0,f.jsxs)("div",{className:"col-12 filter-buttons",children:[(0,f.jsxs)("button",{className:"btn btn-primary",type:"submit",children:[(0,f.jsx)(j.Z,{loading:k,iconClass:"fas fa-search"}),(0,l.ag)("common.search")]}),(0,f.jsxs)("button",{className:"btn btn-light",type:"button",onClick:function(){Object.keys(E).forEach((function(e){S.setValue(e,E[e])})),t(o.Z.doReset()),Z(!1)},children:[(0,f.jsx)(j.Z,{loading:k,iconClass:"fas fa-undo"}),(0,l.ag)("common.reset")]})]})})]})}))})})]})},S=t(61567),M=t(27216),k=t(97249),F=t(98848),V=t(70816),H=t.n(V);var q=function(e){var a=(0,c.I0)(),t=function(e){var t=u.field===e&&"ascend"===u.order?"descend":"ascend";a(o.Z.doChangeSort({field:e,order:t}))},n=(0,c.v9)(d.Z.selectLoading),i=(0,c.v9)(d.Z.selectRows),s=(0,c.v9)(d.Z.selectPagination),r=(0,c.v9)(d.Z.selectHasRows),u=(0,c.v9)(d.Z.selectSorter);return(0,f.jsxs)(M.Z,{children:[(0,f.jsx)("div",{className:"table-responsive",children:(0,f.jsxs)("table",{className:"table table-striped mt-2",children:[(0,f.jsx)("thead",{className:"thead",children:(0,f.jsxs)("tr",{children:[(0,f.jsx)(F.Z,{onSort:t,hasRows:r,sorter:u,name:"timestamp",label:(0,l.ag)("auditLog.fields.timestamp")}),(0,f.jsx)(F.Z,{onSort:t,hasRows:r,sorter:u,name:"createdByEmail",label:(0,l.ag)("auditLog.fields.createdByEmail")}),(0,f.jsx)(F.Z,{onSort:t,hasRows:r,sorter:u,name:"entityName",label:(0,l.ag)("auditLog.fields.entityName")}),(0,f.jsx)(F.Z,{onSort:t,hasRows:r,sorter:u,name:"action",label:(0,l.ag)("auditLog.fields.action")}),(0,f.jsx)(F.Z,{onSort:t,hasRows:r,sorter:u,name:"entityId",label:(0,l.ag)("auditLog.fields.entityId")}),(0,f.jsx)(F.Z,{className:"th-actions-sm"})]})}),(0,f.jsxs)("tbody",{children:[n&&(0,f.jsx)("tr",{children:(0,f.jsx)("td",{colSpan:100,children:(0,f.jsx)(S.Z,{})})}),!n&&!r&&(0,f.jsx)("tr",{children:(0,f.jsx)("td",{colSpan:100,children:(0,f.jsx)("div",{className:"d-flex justify-content-center",children:(0,l.ag)("table.noData")})})}),!n&&i.map((function(e){return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{children:H()(e.timestamp).format("YYYY-MM-DD HH:mm")}),(0,f.jsx)("td",{children:e.createdByEmail}),(0,f.jsx)("td",{children:e.entityName}),(0,f.jsx)("td",{children:e.action}),(0,f.jsx)("td",{children:e.entityId}),(0,f.jsx)("td",{children:(0,f.jsx)("button",{className:"btn btn-link",type:"button",onClick:function(){return function(e){var a=JSON.stringify(e,null,2);window.open("","_blank","toolbar=yes,scrollbars=yes,resizable=yes,top=500,left=500,width=400,height=400").document.write("<pre>".concat(a,"</pre>"))}(e.values)},children:(0,l.ag)("common.view")})})]},e.id)}))]})]})}),(0,f.jsx)(k.Z,{onChange:function(e){a(o.Z.doChangePagination(e))},disabled:n,pagination:s})]})},A=t(28745),D=t(10419);var T=function(e){var a=(0,c.v9)(d.Z.selectLoading),t=(0,c.v9)(d.Z.selectExportLoading),n=(0,c.v9)(d.Z.selectHasRows),i=(0,c.I0)(),s=!n||a;return(0,f.jsxs)(D.Z,{children:[(0,f.jsx)("span",{"data-tip":(0,l.ag)("common.noDataToExport"),"data-tip-disable":!s,"data-for":"audit-log-toolbar-export-tooltip",children:(0,f.jsx)("button",{className:"btn btn-light",type:"button",disabled:s,onClick:function(){i(o.Z.doExport())},children:(0,f.jsx)(j.Z,{loading:t,iconClass:"far fa-file-excel"})})}),(0,f.jsx)(A.Z,{id:"audit-log-toolbar-export-tooltip"})]})},P=t(27829),O=t(53852),Y=t(75352);var G=function(e){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(O.Z,{items:[[(0,l.ag)("dashboard.menu"),"/"],[(0,l.ag)("auditLog.menu")]]}),(0,f.jsxs)(P.Z,{children:[(0,f.jsx)(Y.Z,{children:(0,l.ag)("auditLog.title")}),(0,f.jsx)(T,{}),(0,f.jsx)(I,{}),(0,f.jsx)(q,{})]})]})}},25803:function(e,a,t){var n=t(47313),l=t(43270),i=t(49384),s=t(61378),r=t.n(s),o=(t(72632),t(46417));function d(e){var a=e.label,t=e.name,s=e.hint,d=e.placeholder,c=e.autoFocus,u=e.required,m=e.showTimeInput,g=e.externalErrorMessage,h=(0,l.Gc)(),f=h.register,x=h.errors,p=h.formState,y=p.touched,j=p.isSubmitted,b=h.setValue,v=h.watch,Z=i.Z.errorMessage(t,x,y,j,g),N=v(t);(0,n.useEffect)((function(){f({name:t})}),[f,t]);var C=function(){return N?Array.isArray(!N)?null:N.length&&N[0]||null:null},B=function(){return N?Array.isArray(!N)||N.length<2?null:N[1]||null:null};return(0,o.jsxs)("div",{className:"form-group",children:[Boolean(a)&&(0,o.jsx)("label",{className:"col-form-label ".concat(u?"required":null),htmlFor:t,children:a}),(0,o.jsxs)("div",{style:{display:"flex",flexWrap:"nowrap",alignItems:"baseline"},children:[(0,o.jsx)(r(),{id:"".concat(t,"Start"),name:"".concat(t,"Start"),onChange:function(a){return function(a){b(t,[a,B()],{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange([a,B()])}(a)},onBlur:function(a){e.onBlur&&e.onBlur(a)},selected:C(),className:"form-control ".concat(Z?"is-invalid":""),showTimeInput:m,popperModifiers:{preventOverflow:{enabled:!0,escapeWithReference:!1,boundariesElement:"viewport"}},placeholderText:d||"",autoFocus:c||void 0,autoComplete:"off",dateFormat:m?"yyyy-MM-dd HH:mm":"yyyy-MM-dd",timeIntervals:15}),(0,o.jsx)("div",{style:{flexShrink:1,marginLeft:"8px",marginRight:"8px"},children:"~"}),(0,o.jsx)(r(),{id:"".concat(t,"End"),name:"".concat(t,"End"),onChange:function(a){return function(a){b(t,[C(),a],{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange([C(),a])}(a)},onBlur:function(a){e.onBlur&&e.onBlur(a)},selected:B(),className:"form-control ".concat(Z?"is-invalid":""),showTimeInput:m,placeholderText:d||"",autoFocus:c||void 0,autoComplete:"off",dateFormat:m?"yyyy-MM-dd HH:mm":"yyyy-MM-dd",timeIntervals:15,popperModifiers:{preventOverflow:{enabled:!0,escapeWithReference:!1,boundariesElement:"viewport"}}})]}),(0,o.jsx)("div",{className:"invalid-feedback",children:Z}),Boolean(s)&&(0,o.jsx)("small",{className:"form-text text-muted",children:s})]})}d.defaultProps={required:!1},a.Z=d},47575:function(e,a,t){t(47313);var n=t(43270),l=t(49384),i=t(46417);function s(e){var a=e.label,t=e.description,s=e.name,r=e.hint,o=e.type,d=e.placeholder,c=e.autoFocus,u=e.autoComplete,m=e.required,g=e.externalErrorMessage,h=e.disabled,f=e.endAdornment,x=(0,n.Gc)(),p=x.register,y=x.errors,j=x.formState,b=j.touched,v=j.isSubmitted,Z=l.Z.errorMessage(s,y,b,v,g);return(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsxs)("div",{className:f?"input-group":"",children:[Boolean(a)&&(0,i.jsx)("label",{className:"col-form-label ".concat(m?"required":null),htmlFor:s,children:a}),t,(0,i.jsx)("input",{id:s,name:s,type:o,ref:p,onChange:function(a){e.onChange&&e.onChange(a.target.value)},onBlur:function(a){e.onBlur&&e.onBlur(a)},placeholder:d||void 0,autoFocus:c||void 0,autoComplete:u||void 0,disabled:h,className:"form-control ".concat(Z?"is-invalid":"")}),f&&(0,i.jsx)("div",{className:"input-group-append",children:(0,i.jsx)("span",{className:"input-group-text",children:f})})]}),(0,i.jsx)("div",{className:"invalid-feedback",children:Z}),Boolean(r)&&(0,i.jsx)("small",{className:"form-text text-muted",children:r})]})}s.defaultProps={type:"text",required:!1},a.Z=s},10419:function(e,a,t){var n,l=t(30168),i=t(38269).ZP.div(n||(n=(0,l.Z)(["\n  margin-bottom: 8px;\n\n  .btn {\n    margin-right: 8px;\n    margin-bottom: 8px;\n  }\n"])));a.Z=i}}]);