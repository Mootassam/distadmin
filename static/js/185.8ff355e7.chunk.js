"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[185],{61567:function(e,s,a){a(47313);var n=a(46417);s.Z=function(){return(0,n.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:(0,n.jsx)("div",{className:"spinner-border text-primary"})})}},35185:function(e,s,a){a.r(s),a.d(s,{default:function(){return F}});var n=a(70885),r=a(47313),t=a(45788),i=a(63830),l=a(10499),o=a(13385),u=a(541),c=a(47921),d=a(27829),m=a(53852),f=a(61567),g=a(75352),p=a(1413),Z=a(43270),b=a(5544),x=a(68160),h=a(95748),j=a(6473),v=a(89994),N=a(63442),y=a(67357),_=a(5284),k=a(11550),C=a(47575),q=a(70816),L=a.n(q),E=a(63849),I=a(31616),S=a(46417),B=j.Ry().shape({roles:v.Z.stringArray((0,l.ag)("user.fields.roles"),{min:1}),phoneNumber:v.Z.string((0,l.ag)("phoneNumber"),{max:24}),secteur:v.Z.enumerator((0,l.ag)("secteur"),{options:_.Z.secteur}),employeur:v.Z.string((0,l.ag)("Employeur"),{required:!1}),profession:v.Z.string((0,l.ag)("Profession"),{required:!1}),adresse:v.Z.string((0,l.ag)("adresse"),{required:!1}),fullName:v.Z.string((0,l.ag)("fullName"),{required:!1}),cin:v.Z.integer((0,l.ag)("cin"),{maxlength:8}),date_naissance:v.Z.date((0,l.ag)("Date Naissance"),{required:!1}),etat_civil:v.Z.enumerator((0,l.ag)("user.fields.Etat_Civil"),{options:k.Z.Etat}),status:v.Z.enumerator((0,l.ag)("user.fields.status"),{options:N.Z.status}),lien_facebook:v.Z.string((0,l.ag)("Lien Facebook"),{required:!1}),parrain:v.Z.relationToOne((0,l.ag)("user.fields.parrain"),{required:!1})});var w=function(e){var s=(0,t.I0)(),a=(0,r.useState)((function(){var s=e.user||{};return{roles:s.roles[0],phoneNumber:s.phoneNumber,secteur:s.secteur,employeur:s.employeur,profession:s.profession,adresse:s.adresse,fullName:s.fullName,cin:s.cin,etat_civil:s.etat_civil,date_naissance:s.date_naissance?L()(s.date_naissance).toDate():null,status:s.status,lien_facebook:s.lien_facebook,parrain:s.parrain}})),i=(0,n.Z)(a,1)[0],o=(0,Z.cI)({resolver:(0,y.X)(B),mode:"all",defaultValues:i}),c=function(a){var n=(0,p.Z)({id:e.user.id},a);delete n.email,s(u.Z.doUpdate(n))};return(0,S.jsx)(x.Z,{children:(0,S.jsx)(Z.RV,(0,p.Z)((0,p.Z)({},o),{},{children:(0,S.jsxs)("form",{onSubmit:o.handleSubmit(c),children:[(0,S.jsxs)(E.Z,{style:{paddingBottom:"10px",display:"grid"},children:[(0,S.jsx)(I.Z,{sm:4,children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{className:"col-form-label",htmlFor:"email",children:(0,l.ag)("user.fields.email")}),(0,S.jsx)("input",{type:"text",readOnly:!0,className:"form-control-plaintext",id:"email",name:"email",value:e.user.email})]})}),(0,S.jsx)(I.Z,{sm:4,children:(0,S.jsx)(b.Z,{name:"roles",label:(0,l.ag)("user.fields.roles"),required:!0,options:N.Z.roles.map((function(e){return{value:e,label:(0,l.ag)("".concat(e))}}))})}),(0,S.jsx)(I.Z,{sm:4,children:(0,S.jsx)(b.Z,{name:"status",label:(0,l.ag)("user.fields.status"),options:N.Z.status.map((function(e){return{value:e,label:(0,l.ag)("user.status.".concat(e))}}))})})]}),(0,S.jsx)(E.Z,{children:(0,S.jsx)(I.Z,{sm:4,children:(0,S.jsx)(C.Z,{name:"fullName",label:(0,l.ag)("user.fields.fullName"),required:!0})})}),(0,S.jsxs)("div",{className:"form-buttons",children:[(0,S.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:o.handleSubmit(c),children:[(0,S.jsx)(h.Z,{loading:e.saveLoading,iconClass:"far fa-save"}),"\xa0",(0,l.ag)("common.save")]}),(0,S.jsxs)("button",{className:"btn btn-light",disabled:e.saveLoading,onClick:function(){Object.keys(i).forEach((function(e){o.setValue(e,i[e])}))},type:"button",children:[(0,S.jsx)("i",{className:"fas fa-undo"}),(0,l.ag)("common.reset")]}),e.onCancel?(0,S.jsxs)("button",{className:"btn btn-light",disabled:e.saveLoading,onClick:function(){return e.onCancel()},type:"button",children:[(0,S.jsx)("i",{className:"fas fa-times"}),(0,l.ag)("common.cancel")]}):null]})]})}))})};var F=function(e){var s=(0,t.I0)(),a=(0,r.useState)(!1),p=(0,n.Z)(a,2),Z=p[0],b=p[1],x=(0,t.v9)(c.Z.selectInitLoading),h=(0,t.v9)(c.Z.selectSaveLoading),j=(0,t.v9)(c.Z.selectUser),v=(0,i.$B)(),N=Boolean(v.params.id);return(0,r.useEffect)((function(){s(u.Z.doInit(v.params.id)),b(!0)}),[s,v.params.id]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(m.Z,{items:[[(0,l.ag)("dashboard.menu"),"/"],[(0,l.ag)("user.menu"),"/user"],[(0,l.ag)("user.edit.title")]]}),(0,S.jsxs)(d.Z,{children:[(0,S.jsx)(g.Z,{children:(0,l.ag)("user.edit.title")}),x&&(0,S.jsx)(f.Z,{}),Z&&!x&&(0,S.jsx)(w,{user:j,saveLoading:h,isEditing:N,onCancel:function(){return(0,o.s1)().push("/user")}})]})]})}}}]);